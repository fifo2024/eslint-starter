import{r as t,j as o,a as d,R as x,b as m}from"./index-cJqFxIoG.js";import{s as f}from"./style.module-Bp7yqvDX.js";function j({onClose:s}){return o.jsx("div",{className:f.modal,children:o.jsxs("div",{children:[o.jsx("p",{children:"This is a modal."}),o.jsx("button",{onClick:s,children:"Close"})]})})}function k(){const[s,e]=t.useState(!1);return o.jsxs("div",{children:[o.jsx("button",{onClick:()=>e(!0),children:"Open modal."}),s&&d.createPortal(o.jsx(j,{onClose:()=>e(!1)}),document.body)]})}const h="_main_qvcue_1",p={main:h},b=()=>{const s=t.useRef(null),e=t.useRef(null),[C,l]=t.useState(),[r,a]=t.useState(!1);t.useEffect(()=>{const n=new WebSocket("ws://127.0.0.1:1337/foo");n.onopen=function(){console.log("WebSocket 连接已打开")},n.onmessage=function(c){console.log("WebSocket 接收到消息:",c.data),(e==null?void 0:e.current).value+=c.data+`
`},n.onerror=function(){console.log("WebSocket 发生错误")},n.onclose=function(){console.log("WebSocket 连接已关闭")},l(n)},[]);const i=()=>{const n="Hello, WebSocket!"+Math.random();(e==null?void 0:e.current).value+="发送消息: "+n+`
`},u=()=>{a(!0)};return o.jsxs("div",{className:p.main,children:[o.jsx("button",{ref:s,onClick:i,children:"发送消息"}),o.jsx("input",{ref:e}),o.jsx("button",{onClick:u,children:"测试CreatePortal"}),o.jsx("div",{id:"portal"}),r?o.jsx(k,{}):null]})},S=b;function M(){return o.jsx(x,{children:o.jsx(m,{index:!0,element:o.jsx(S,{})})})}export{M as default};
